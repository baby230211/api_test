{"version":3,"sources":["webpack:///./src/views/ScenicSpot.vue?4780","webpack:///src/views/ScenicSpot.vue","webpack:///./src/views/ScenicSpot.vue?ef12","webpack:///./src/views/ScenicSpot.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","directives","name","rawName","value","expression","attrs","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","select","multiple","_l","item","key","domProps","_s","update","_e","ID","Name","Description","nodata","staticRenderFns","data","list","tourism","loading","methods","loadMore","test","console","log","length","params","err","obs","setTimeout","res","mounted","watch","$route","now","$router","push","newval","component"],"mappings":"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","file":"js/about.b300e933.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"about\"},[_c('h1',[_vm._v(\"This is an about page\")]),_c('div',[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.select),expression:\"select\"}],attrs:{\"name\":\"\",\"id\":\"\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.select=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"selected\":\"\",\"value\":\"\"}},[_vm._v(\"請選擇\")]),_vm._l((_vm.list),function(item){return _c('option',{key:item,domProps:{\"value\":item}},[_vm._v(\" \"+_vm._s(item)+\" \")])})],2)]),(_vm.select)?_c('router-view',{on:{\"update\":_vm.update}}):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.select),expression:\"!select\"}],staticClass:\"doc\"},[(_vm.loading)?_c('div',{staticClass:\"loading\"},[_vm._v(\"loading\")]):_vm._e(),_c('div',{staticClass:\"container\"},_vm._l((_vm.tourism),function(item){return _c('div',{key:item.ID,staticClass:\"item\"},[_vm._v(\" \"+_vm._s(item.Name)+\" \"),_c('div',[_vm._v(\" \"+_vm._s(item.Description)+\" \")])])}),0),_c('div',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.nodata),expression:\"nodata\"}],staticClass:\"bottom\"},[_vm._v(\" 我是頁尾 \")]),_c('h1',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.nodata),expression:\"!nodata\"}]},[_vm._v(\" 沒有資料了 \")])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"about\">\n    <h1>This is an about page</h1>\n    <!-- <div>\n      <router-link :to=\"{path:'/ScenicSpot/'+item}\"  v-for=\"item in list\" :key=\"item\" >{{item}} | </router-link>\n    </div> -->\n    <div>\n        <select name=\"\" id=\"\" v-model=\"select\" >\n          <option selected value=\"\">請選擇</option>\n          <option :value=\"item\" v-for=\"item in list\" :key=\"item\">\n            {{item}}\n          </option>\n        </select> \n    </div>\n    <router-view v-if=\"select\" @update=\"update\"/>\n    <div class=\"doc\" v-show=\"!select\">\n      <div class=\"loading\" v-if=\"loading\">loading</div>\n      <div class=\"container\">\n        <div class=\"item\" v-for=\"item in tourism\" :key=\"item.ID\">\n          {{item.Name}}\n          <div>\n                      {{item.Description}}\n          </div>\n        </div>\n      </div>\n      <div  >\n        <div class=\"bottom\" v-show=\"nodata\">\n              我是頁尾\n        </div>\n        <h1 v-show=\"!nodata\"> \n          沒有資料了\n        </h1>\n      </div>\n    </div>\n    </div>\n</template>\n<script>\nimport axios from 'axios'\n// import City from '../components/City/index.vue'\nexport default {\n  data(){\n    return{\n      list:[\n      \n        \"Taipei\",\n        \"NewTaipei\",\n        \"Taoyuan\",\n        \"Taichung\",\n        \"Tainan\",\n        \"Kaohsiung\",\n        \"Keelung\",\n        \"Hsinchu\",\n        \"HsinchuCounty\",\n        \"MiaoliCounty\",\n        \"ChanghuaCounty\",\n        \"NantouCounty\",\n        \"YunlinCounty\",\n        \"ChiayiCounty\",\n        \"Chiayi\",\n        \"PingtungCounty\",\n        \"YilanCounty\",\n        \"HualienCounty\",\n        \"TaitungCounty\",\n        \"KinmenCounty\",\n        \"PenghuCounty\",\n        \"LienchiangCounty\"\n      ],\n      tourism:[],\n      select:'',\n      loading:false,\n      nodata:true\n    }\n  },\n  methods:{\n    update(val){\n      this.select=val\n    },\n    loadMore(){\n      let length=this.tourism.length\n      if(length%30!=0){\n        this.test()\n      }\n      console.log(length)\n      // dev\n      /*axios.get(`/ScenicSpot/api`,{\n        params:{\n        $top:'30',\n        $skip:`${length}`,\n        $format:'JSON',\n\n      }}).then(res=>{\n          this.tourism=this.tourism.concat(res.data)\n        \n      }).catch(err=>{\n        console.log(err)\n      })*/\n      // production\n      axios.get(`https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot`,{\n        params:{\n        $top:'30',\n        $skip:`${length}`,\n        $format:'JSON',\n\n      }}).then(res=>{\n          this.tourism=this.tourism.concat(res.data)\n        \n      }).catch(err=>{\n        console.log(err)\n      })\n\n    },\n    obs(){\n      let io =new IntersectionObserver(entries=>{\n      // console.log(entries[0].boundingClientRect[\"y\"])\n      // console.log(entries)\n      let height=window.innerHeight-100\n      // console.log(height)\n      if(entries[0].intersectionRatio==1&&entries[0].boundingClientRect['y']>height){\n        if(this.loading) return\n        this.loading=true\n        setTimeout(()=>{\n          this.loadMore()\n          this.loading=false\n        },4000)\n\n\n      }\n    },{threshold:[1]})\n    io.observe(document.querySelector('.bottom'))\n\n    },\n    call(){\n      if(this.loading) return\n      this.loading=true\n      setTimeout(()=>{\n        axios.get(`https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot`,{\n            params:{\n              '$top':'30',\n              '$format':'JSON'\n            }\n        }).then(res=>{\n          console.log(res.data)\n          this.tourism=res.data\n          this.loading=false\n        })\n      },2000)\n    }\n  },\n  mounted(){\n    this.call()\n    this.obs()\n  },\n  watch:{\n    $route(now){\n      console.log(now)\n      if(now.params.id){\n        this.select=now.params.id\n      }else if(!now.params.id){\n        this.select='',\n        this.tourism=[],\n        this.call()\n      }\n      \n    },\n    select(newval){\n      if(!newval){\n        console.log(newval)\n      }\n      else if(newval !=this.$route.params.id){\n        // console.log(newval)\n        this.$router.push(\n         {path:'/api_test/ScenicSpot/'+newval}\n        )\n      }\n\n  }},\n  // components:{\n  //   City\n  // },\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScenicSpot.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScenicSpot.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ScenicSpot.vue?vue&type=template&id=51564b82&\"\nimport script from \"./ScenicSpot.vue?vue&type=script&lang=js&\"\nexport * from \"./ScenicSpot.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}